{"id":"substrate-features-f4a3bc-2cz","title":"substrate-features","description":"Add new features to the substrate framework to improve extensibility and reduce coupling.\n\n## Goals\n1. Add extension output builders - allow extensions to contribute flake outputs\n2. Extract packages from core to an extension\n3. Extract overlays from core to an extension\n4. Simplify the flake-parts adapter by removing extension-specific knowledge\n\n## Approach\nSolve adapter coupling first by adding output builders, then use that pattern to extract packages and overlays.","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-19T11:18:59.544583215-06:00","created_by":"craig","updated_at":"2026-02-19T11:36:18.775054685-06:00","labels":["epic","project"]}
{"id":"substrate-features-f4a3bc-2cz.1","title":"Add extension output builders to substrate","description":" extension point. The flake-parts adapter calls all registered builders without needing to know what extensions exist.\n\n## Tasks\n- Add outputBuilders option to core/settings.nix\n- Update flake-parts adapter to call registered builders\n- Migrate home-manager extension to use outputBuilders\n- Migrate shells extension to use outputBuilders\n- Remove extension-specific checks from adapter","status":"in_progress","priority":0,"issue_type":"task","created_at":"2026-02-19T11:36:25.202604428-06:00","created_by":"craig","updated_at":"2026-02-19T11:37:15.4827572-06:00","dependencies":[{"issue_id":"substrate-features-f4a3bc-2cz.1","depends_on_id":"substrate-features-f4a3bc-2cz","type":"parent-child","created_at":"2026-02-19T11:36:25.2041276-06:00","created_by":"craig"}]}
{"id":"substrate-features-f4a3bc-2cz.2","title":"Extract packages from core to extension","description":"\n\n## Tasks\n- Create extensions/packages/default.nix\n- Move package-related code from core/packages.nix\n- Move mkPackages from core/lib.nix to extension\n- Register output builder for packages\n- Update hdwlinux to import the packages extension\n- Remove packages from core","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-02-19T11:36:33.40006139-06:00","created_by":"craig","updated_at":"2026-02-19T11:44:22.11866763-06:00","dependencies":[{"issue_id":"substrate-features-f4a3bc-2cz.2","depends_on_id":"substrate-features-f4a3bc-2cz","type":"parent-child","created_at":"2026-02-19T11:36:33.400913094-06:00","created_by":"craig"}]}
{"id":"substrate-features-f4a3bc-2cz.3","title":"Extract overlays from core to extension","description":"\n- Integrates with packages extension if present\n\n## Tasks\n- Create extensions/overlays/default.nix\n- Move overlay-related code from core/overlays.nix\n- Move mkAllOverlays from core/lib.nix to extension\n- Register output builder for overlays\n- Handle integration with packages extension\n- Update hdwlinux to import the overlays extension\n- Remove overlays from core","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-02-19T11:36:39.45126015-06:00","created_by":"craig","updated_at":"2026-02-19T12:01:16.189329697-06:00","dependencies":[{"issue_id":"substrate-features-f4a3bc-2cz.3","depends_on_id":"substrate-features-f4a3bc-2cz","type":"parent-child","created_at":"2026-02-19T11:36:39.452618964-06:00","created_by":"craig"}]}
{"id":"substrate-features-f4a3bc-2cz.4","title":"Add substrate.outputs infrastructure","description":"Add the new substrate.outputs option to core for generic output declarations.\n\n## Design\n- per-system outputs receive { pkgs, system, inputs, substrate }\n- global outputs receive { inputs, substrate }\n\n## Tasks\n- Create core/outputs.nix with substrate.outputs option\n- Add to core/default.nix imports","status":"in_progress","priority":0,"issue_type":"task","created_at":"2026-02-19T12:43:53.092802321-06:00","created_by":"craig","updated_at":"2026-02-19T12:46:22.891879676-06:00","dependencies":[{"issue_id":"substrate-features-f4a3bc-2cz.4","depends_on_id":"substrate-features-f4a3bc-2cz","type":"parent-child","created_at":"2026-02-19T12:43:53.094102632-06:00","created_by":"craig"}]}
{"id":"substrate-features-f4a3bc-2cz.5","title":"Migrate extensions to substrate.outputs","description":"Update all extensions to use the new substrate.outputs instead of outputBuilders.\n\n## Extensions to migrate\n- packages: per-system output for packages\n- overlays: global output for overlays\n- shells: per-system output for devShells\n- home-manager: global output for homeConfigurations\n\n## Tasks\n- Update packages extension to use substrate.outputs.packages\n- Update overlays extension to use substrate.outputs.overlays\n- Update shells extension to use substrate.outputs.devShells\n- Update home-manager extension to use substrate.outputs.homeConfigurations","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-02-19T12:44:01.35012086-06:00","created_by":"craig","updated_at":"2026-02-19T12:47:58.888865842-06:00","dependencies":[{"issue_id":"substrate-features-f4a3bc-2cz.5","depends_on_id":"substrate-features-f4a3bc-2cz","type":"parent-child","created_at":"2026-02-19T12:44:01.351867993-06:00","created_by":"craig"}]}
{"id":"substrate-features-f4a3bc-2cz.6","title":"Update flake-parts adapter to use substrate.outputs","description":"Update the flake-parts adapter to read from substrate.outputs instead of outputBuilders.\n\n## Design\n- Iterate substrate.outputs\n- For per-system types: call builder in perSystem context with { pkgs, system, inputs, substrate }\n- For global types: call builder with { inputs, substrate } and add to flake outputs\n\n## Tasks\n- Update adapter.nix to iterate substrate.outputs\n- Handle per-system vs global output types\n- Remove outputBuilders logic","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-02-19T12:44:10.309703923-06:00","created_by":"craig","updated_at":"2026-02-19T13:18:42.449159966-06:00","dependencies":[{"issue_id":"substrate-features-f4a3bc-2cz.6","depends_on_id":"substrate-features-f4a3bc-2cz","type":"parent-child","created_at":"2026-02-19T12:44:10.310574675-06:00","created_by":"craig"}]}
{"id":"substrate-features-f4a3bc-2cz.7","title":"Remove outputBuilders from core","description":"Clean up the old outputBuilders system now that everything uses substrate.outputs.\n\n## Tasks\n- Remove outputBuilders option from core/settings.nix\n- Verify all tests pass","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-02-19T12:44:18.312962611-06:00","created_by":"craig","updated_at":"2026-02-19T13:20:17.993857838-06:00","dependencies":[{"issue_id":"substrate-features-f4a3bc-2cz.7","depends_on_id":"substrate-features-f4a3bc-2cz","type":"parent-child","created_at":"2026-02-19T12:44:18.313846647-06:00","created_by":"craig"}]}
